<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de FacturaciÃ³n</title>
    <link rel="stylesheet" href="css/estilos.css" />
</head>
<body>

<!-- ğŸ” Login -->
<div class="login-container" id="loginContainer">
    <form id="loginForm" class="login-form">
        <h2>ğŸ” Iniciar SesiÃ³n</h2>
        <label for="usuario">Usuario:</label>
        <input type="text" id="usuario" required />
        <label for="contrasena">ContraseÃ±a:</label>
        <input type="password" id="contrasena" required />
        <button type="submit">Ingresar</button>
        <p id="errorLogin" class="error-text"></p>
    </form>
</div>

<!-- ğŸ’¼ App Principal -->
<div id="app" style="display: none;">
    <div class="menu-dashboard">
        <div class="logo"><span>ğŸ§¾ FacturaciÃ³n</span></div>
        <div class="menu">
            <div class="enlace activo" id="btnInicio">Inicio</div>
            <div class="enlace">ğŸ“„ Datos de Empresa</div>
            <div class="enlace" id="btnVentas">ğŸ“Š InformaciÃ³n de Ventas</div>
            <div class="enlace" id="btnCerrarSesion">ğŸ”’ Cerrar SesiÃ³n</div>
            <div class="enlace" id="toggleIA">ğŸ¤– Asistente IA</div>
        </div>
    </div>

    <main class="contenido">
        <!-- SecciÃ³n Emitir Comprobante -->
        <section id="mainComprobante">
            <fieldset>
                <legend>Emitir Boleta o Factura</legend>

                <div class="tipo-comprobante">
                    <button type="button" class="opcion-btn activo" id="btnBoleta">Boleta</button>
                    <button type="button" class="opcion-btn" id="btnFactura">Factura</button>
                </div>

                <form id="formComprobante">
                    <fieldset>
                        <legend>ğŸ§‘ Datos del Cliente</legend>
                        <label id="labelDocumento">NÃºmero de DNI:</label>
                        <div class="fila-busqueda">
                            <input type="text" id="documento" required />
                            <button type="button" id="btnBuscarDocumento" class="btn-buscar">ğŸ” Buscar</button>
                        </div>
                        <label>RazÃ³n Social:</label>
                        <input type="text" id="razonSocial" required />
                        <label>DirecciÃ³n:</label>
                        <input type="text" id="direccion" />
                    </fieldset>

                    <fieldset>
                        <legend>ğŸ’¼ Detalle del Producto o Servicio</legend>
                        <table id="tablaProductos">
                            <thead>
                            <tr>
                                <th>Unidad</th>
                                <th>Cantidad</th>
                                <th>CÃ³digo</th>
                                <th>DescripciÃ³n</th>
                                <th>Precio Unitario (S/)</th>
                                <th>Total (S/)</th>
                            </tr>
                            </thead>
                            <tbody id="cuerpoProductos"></tbody>
                            <tfoot>
                            <tr>
                                <td colspan="4" style="text-align:right; font-weight:bold;">Total General:</td>
                                <td id="totalGeneral">S/ 0.00</td>
                            </tr>
                            </tfoot>
                        </table>
                    </fieldset>

                    <!-- Acciones -->
                    <div class="acciones">
                        <div style="width: 100%; margin-bottom: 1rem;">
                            <button type="submit" class="btn-verde" style="width: 100%;">Emitir</button>
                        </div>
                        <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
                            <button type="button" id="btnGenerarBoleta" class="btn-verde">ğŸ§¾ Generar Boleta</button>
                            <button type="button" id="btnDescargarPdf" class="btn-verde" style="display:none;">â¬‡ï¸ Descargar PDF</button>
                            <button type="button" id="btnWhatsappPdf" class="btn-verde" style="display:none;">ğŸ“² Enviar por WhatsApp</button>
                        </div>
                    </div>

                    <!-- PDF -->
                    <div id="pdfContainer" style="margin-top: 20px;"></div>
                </form>
            </fieldset>
        </section>

        <!-- SecciÃ³n Ventas -->
        <section id="mainVentas" style="display: none;">
            <fieldset>
                <legend>ğŸ“Š Historial de Ventas</legend>
                <table id="tablaVentas">
                    <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Cliente</th>
                        <th>Documento</th>
                        <th>Monto Total</th>
                        <th>Estado</th>
                    </tr>
                    </thead>
                    <tbody id="cuerpoVentas"></tbody>
                </table>
            </fieldset>
        </section>

        <!-- Vista JSON -->
        <section id="vistaJSON" style="display: none;">
            <fieldset>
                <legend>ğŸ“¦ Vista Previa del JSON Generado</legend>
                <pre id="jsonPreview" style="background: #f5f5f5; padding: 1rem; border-radius: 6px; max-height: 400px; overflow-y: auto;"></pre>
            </fieldset>
        </section>
    </main>

    <!-- ğŸ’¬ Chat IA -->
    <div id="chatIA" class="chat-ia oculto">
        <div class="chat-header">
            Asistencia Inteligente
            <span id="cerrarIA" title="Cerrar">âœ–</span>
        </div>
        <div class="chat-mensajes" id="mensajesIA"></div>
        <div class="chat-input">
            <input type="text" id="inputIA" placeholder="Escribe tu mensaje..." />
            <button id="enviarIA">Enviar</button>
        </div>
    </div>
</div>

<script src="js/app.js"></script>
</body>
</html>
